<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>获得光标位置文本</title>
</head>
<body>
	<textarea id="source" rows="10" cols="50" onmouseup="selection()">青玉案·元夕
东风夜放花千树。
更吹落、星如雨。
宝马雕车香满路。
凤箫声动，玉壶光转，一夜鱼龙舞。
蛾儿雪柳黄金缕。
笑语盈盈暗香去。
众里寻他千百度。
蓦然回首，那人却在，灯火阑珊处。
</textarea>
	<textarea id="select" rows="10" cols="50" disabled></textarea>
	<script type="text/javascript">
		function selection() {
			var source = document.getElementById('source');
			var select = document.getElementById('select');
			var start = source.selectionStart | 0;
			var end = source.selectionEnd | 0;
			if (start == end) {
				start = 0;
			}
			select.value = source.value.substring(start, end);
		};
	</script>
</body>
</html>